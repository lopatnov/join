(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['exports'], factory) :
    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.join = {}));
})(this, (function (exports) { 'use strict';

    const _toString=Object.prototype.toString,_getProto=Object.getPrototypeOf,_hasOwn=Object.prototype.hasOwnProperty,_fnToString=Function.prototype.toString,_ObjectFunctionString=_fnToString.call(Object);exports.JoinTypes = void 0;function getPartNames(e,t){let n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);const r=new Set(o),i=n.filter(e=>r.has(e)),c=new Set(i);return n=n.filter(e=>!c.has(e)),o=o.filter(e=>!c.has(e)),{left:n,middle:i,right:o}}function clearNames(e,t){for(let n=0;n<t.length;n++)delete e[t[n]];}function attach(e,t,n){if(e!==t)for(let o=0;o<n.length;o++){const r=Object.getOwnPropertyDescriptor(t,n[o]);Object.defineProperty(e,n[o],r);}}function isFunction(e){return "function"==typeof e&&"number"!=typeof e.nodeType}function isPlainObject(e){if(!e||"[object Object]"!==_toString.call(e))return  false;const t=_getProto(e);if(!t)return  true;const n=_hasOwn.call(t,"constructor")&&t.constructor;return "function"==typeof n&&_fnToString.call(n)===_ObjectFunctionString}function extend(...e){const t=e.length;let n,o,r,i,c,s,f=e[0]||{},l=1,a=false;for("boolean"==typeof f&&(a=f,f=e[l]||{},l++),"object"==typeof f||isFunction(f)||(f={}),l===t&&(f={},l--);l<t;l++)if(null!=(n=e[l]))for(o in n)i=n[o],"__proto__"!==o&&f!==i&&(a&&i&&(isPlainObject(i)||(c=Array.isArray(i)))?(r=f[o],s=c&&!Array.isArray(r)?[]:c||isPlainObject(r)?r:{},c=false,f[o]=extend(a,s,i)):void 0!==i&&(f[o]=i));return f}function mergeObjects(e,t,n){if(e!==t)for(let o=0;o<n.length;o++)if(null===t[n[o]]||t[n[o]]instanceof RegExp||["string","boolean","undefined","symbol","number","bigint"].indexOf(typeof t[n[o]])>-1){const r=Object.getOwnPropertyDescriptor(t,n[o]);Object.defineProperty(e,n[o],r);}else e[n[o]]=extend(true,e[n[o]],t[n[o]]);}function joinSource(e,t,n=exports.JoinTypes.expand){if(-16&n)throw new Error("Invalid join type. Please select join type");const o=Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e));if(n===(exports.JoinTypes.left|exports.JoinTypes.innerLeft))return o;const r=getPartNames(o,t);switch(n&exports.JoinTypes.innerJoin){case exports.JoinTypes.none:clearNames(o,r.middle);break;case exports.JoinTypes.innerLeft:break;case exports.JoinTypes.innerRight:attach(o,t,r.middle);break;case exports.JoinTypes.innerJoin:mergeObjects(o,t,r.middle);}return (n&exports.JoinTypes.left)!==exports.JoinTypes.left&&clearNames(o,r.left),(n&exports.JoinTypes.right)===exports.JoinTypes.right&&attach(o,t,r.right),o}!function(e){e[e.none=0]="none",e[e.left=8]="left",e[e.right=1]="right",e[e.innerLeft=4]="innerLeft",e[e.innerRight=2]="innerRight",e[e.innerJoin=6]="innerJoin",e[e.leftJoin=14]="leftJoin",e[e.rightJoin=7]="rightJoin",e[e.fullJoin=15]="fullJoin",e[e.expand=11]="expand";}(exports.JoinTypes||(exports.JoinTypes={}));function join(e=exports.JoinTypes.expand){if(!e)throw new Error("Unknown join type");return function(t){return function(n){return joinSource(t,n,e)}}}

    exports.join = join;

}));
//# sourceMappingURL=join.umd.min.js.map
